---
date: 2023-08-01
layout: post
title: 코인 자동 매매
subtitle: 진행 상황 정리
description: 진행 상황 정리
image: >-
    https://github.com/lcw3176/lcw3176.github.io/assets/59993347/da8960d6-888e-47fa-bf7c-6e31aba25bdf
category: etc
tag:
- CryptoCurrency
- AutoTrading
---

## 시스템 트레이딩

나는 자동매매, 그 중에서도 코인에 관련한 프로그램을 3년째 개발하고 있다.

사실 처음에 자동매매 자체에 대한 신뢰가 거의 없었다. 
워낙 사짜들이 많은 분야이기도 하고 '이런게 개발이 가능했으면 다들 떼부자가 되지 않았을까' 하는 생각이었다.

하지만 수 많은 코인 거래 팁 게시글들을 보고 다녀보니, 대부분의 고수들의 노하우가 '마치 기계처럼 매수,매도해라' 였다.

그러면 '사람이 기계처럼 매수, 매도 할게 아니라 진짜 기계한테 시키면 되지 않나?' 라는 생각이 점점 들어서 
개발을 시도해 보았고, 어느 덧 3년이 흘러가고 있다.

그 동안 개발을 하며 느낀 점들을 정리해 보려 한다.

## 매매 기법

### 주객전도

일단 처음부터 타겟을 명학히 잡아야 할 것 같다.

이 프로젝트를 내 개발적 포트폴리오로 사용할 것인지, 혹은 진짜 수익화를 원하는 것인지 말이다.

어느 방향으로 잡느냐에 따라 아예 방향성이 달라진다. 참고로 나는 전자를 찔끔찔끔 노리다가 아예 후자로 확 틀었다.

자꾸 코드 퀄리티나 인프라에 신경 쓰다보면 정작 중요한 비즈니스 로직에 손대는 시간이 적어진다.
적절한 매매 기법을 언제 찾을지 기약도 없는 상황에 오히려 업무가 늘어나는 셈이다.


### 차트 공부

자동 매매를 할 때 참고할 수 있는 사항은 차트 뿐이다. 

나도 처음에 차트 공부를 안하고 '개발적으로 어떻게 하면 되겠지?' 라는 요행을 바랬는데,
결국 공부를 해야 한다.

시스템 트레이딩이라고 거창하게 불러서 그렇지, 사실 '잘 되는' 매매 기법을 '자동화' 하는 것이다.
근데 자꾸 '자동화'만 먼저 하고 '잘 되는' 매매 기법을 찾으려 하다보니, 일의 순서가 꼬인다.


### 스캘핑, 스윙

자동매매로 단타, 스캘핑을 구현하는 것은 거의 신의영역 같다고 느꼈다. 진짜 너무 어렵다.

그나마 매매 텀을 길게 가져가면 한결 낫긴 한데, 
이게 그렇다고 마냥 길면 그 시간동안 돈이 묶여있는 것도 고려를 해주어야 하기 때문에 자신의 성향에 맞게 잘 짜야 되는 것 같다.

나는 보통 길어도 하루, 이틀 안에 다 정리할 수 있도록 작성했다.

### 분할 매매

양날의 칼이라고 생각한다.

적절한 분할 매매는 평단을 효과적으로 낮추지만, 
무지성으로 분할 매수를 들어가면 결국 돈은 더 크게 날리고 자금만 오랜 시간 묶여있게 된다.

나는 그래서 차라리 손절을 짧게 가져가되, 분할 매매는 하지 않는 방식으로 진행하고 있다.

### 추격 매수, 저점 매수

자동 매매는 추격 매수 구현이 편하긴 하다.

저점 매수 하려면 이리 저리 분봉도 바꿔보고 지지, 저항 라인 찾고 해야되는데
내가 사용중인 업비트 API는 캔들 조회가 한번에 200개가 최대라서, 15분봉 같이 단위가 작아지면
사실상 라인 긋기는 힘들다.


## 백테스트

### 중요성

백테스트는 과거의 차트를 가지고 내 매매법을 검증하는 행위를 말한다.

백테스트 과정을 구축하지 않으면 바로 실전 테스트로 가야하는데, 돈이 많으면 상관없긴 한데

내가 그정도로 돈이 많았으면 자동매매를 개발 안할 것 같다.

### 치명적인 오류

![화면 캡처 2023-08-01 132831](https://github.com/lcw3176/lcw3176.github.io/assets/59993347/c848f6ba-3257-4d01-8a4c-6cff94df645c)


과거의 차트는 이미 '완성된' 상태로 우리에게 전달된다는 것을 명심해야 한다.

만약 내가 차트의 종가만 보고 판단하는 로직이라면, 위와 같이 꼬리가 그려진 형태의 차트는 제대로 테스트가 되었을 가능성이 적다.

라이브로 매매 진행시 저런 꼬리에 낚여서 진입을 하는 경우가 상당히 많기 때문에, 조심해야 한다.

나는 이를 해결하기 위해 실제 차트와 백테스트 차트를 동기화 시키는 작업을 했다.

이게 무슨 말이냐면, 백테스트 시에도 맨 앞의 캔들(0번 인덱스)로 뭔가를 판단하는 것이 아니라 바로 그 전의 캔들(1번 인덱스)만 바라보게 하는 것이다.

이런식으로 백테스트를 진행하면 실제 차트도 1번 인덱스 캔들은 완성된 상태일 것이기 때문에 백테스트와 동일한 결과를 기대할 수 있다.


## 결론

요행을 바라지 말자. 차트 공부 열심히 하자.

아무리 코인판이 한탕이라고는 해도 일확천금을 바라지는 말자. 꾸준히 조금씩이라도 뭘 해보자.

이상한 AI 매매 광고 같은데도 속지 말자. 
진짜 떼돈 벌어주는 프로그램들이었으면 우리가 들어본 적도 없을 거다.

