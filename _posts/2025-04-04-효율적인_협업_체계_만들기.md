---
date: 2025-04-04
layout: post
title: 효율적인 협업 체계 만들기
categories: [Backend]
image: https://upload.wikimedia.org/wikipedia/commons/thumb/0/0a/Python.svg/1200px-Python.svg.png
---

## 업무 환경 만들기

로마에 가면 로마법을 따르라길래 잘 따르려고 했는데, 로마가 무정부 상태라면 어떻게 해야 할까?
빨리 짐 싸서 튀는게 정답일까? 아니면 끝까지 남아 정부 수립에 기여해야 하는 걸까? 나도 사실 잘 모르겠다. 
그래도 한 가지 확실한 건, 어딘가에 소속되어 있고 시간에 대한 보상을 받고 있다면 적어도 그 기간에는 최선을 다해야 한다.

다음주에 개선된 코드 작성 방안에 대해 발표를 하려고 했는데, 다른 내용들을 먼저 말하는 게 좋을 것 같다.
디자인 패턴이나 패키지 구조, 코드 작성 규약과 같은 방법론들의 끝점에 있는 건 결국 사람인데, 
이 엔드포인트를 사람이 아닌 시스템으로 변경하지 않는 이상 지속시키기는 어려울 것 같았다.

무턱대고 그냥 '코드 갈아엎고 이런 방식으로 다시 짜보자!' 라고 말한다면 나홀로 지키는 룰이 될 것이기 때문에,
일단은 뭐가 문제인지부터 서로 파악을 하고, 공감대 형성에 성공한다면 이를 바탕으로 시스템적인 제약을 거는 방향으로 설정했다.

일단 문제 파악부터 해보자. 갈길이 멀다... ㅠㅠ

## 문제 1. 라우터 몰빵 코드

대부분의 서비스 로직이 컨트롤러 하나의 메서드에 작성되고 있다.
여기에 하나 더 추가로 db 엔티티도 하나의 단일 파일에서 관리되고 있는데, 
그 파일에 컨트롤러 요청, 응답 모델도 같이 존재한다. 
회사 코드를 공개할 수는 없고, 이런 분리되지 않은 코드들이 가지고 온 결과를 설명해 보자면 다음과 같다.

### 문제 정리

1. 심각한 코드 중복 
    - 수없이 반복되는 권한 체크 코드
    - 진행 불가능한 유닛 테스트
    - 끊임없이 반복되는 동일 쿼리문
2. 난독화 수준의 알쏭달쏭 코드
    - 추상화가 되어 있지 않은 날것 그대로의 조건들
    - url을 호출하면 어떤 동작을 할 지 예측 힘듬
3. 수많은 기능이 중첩된 단일 메서드
    - 특정 url은 관리자가 수정, 삭제 그리고 유저가 생성하는 기능을 다 같이 수행
4. 분리되지 않은 요청, 응답 모델
    - 이곳 저곳에서 다쓰이는 모델들
    - 값 수정시 어디서 무슨 문제가 터질지 모르는 짜릿함
5. 수없이 반복되는 깃 컨플릭트
    - 같은 파일을 서로 수정하다 보니 충돌은 다반사

### 해결책

결국 코딩 컨벤션이나 공통 가이드라인이 없어서 생기는 문제다. 
이런걸 xml 파일로 만들어서 pr 날릴때 파이프라인으로 잡아주거나 코드 리뷰 문화라도 있으면 해결해 볼 수 있을것 같은데, 
지금 우리 팀이랑은 너무 거리가 먼 얘기같다. 솔직히 정상적으로 작동 안 할 것 같다. 유의미한 문화가 될 수 있는지도 모르겠고...
차라리 소나큐브같은 외부 인프라를 땡겨쓰는것도 좋을 것 같은데, 결재 올릴만큼 공감대를 얻을 수 있을지 모르겠다.
그렇다고 손 놓고 있을 수는 없으니, 일단 최대한 실현 가능한 해결책들을 생각해보자.

1. 쿼리문 분리



## 문제 2. 찾을 수 없는 로그


## 문제 3. 테스트? 그게 뭔데?


## 문제 4. 지금 내가 짜는게 곧 표준

- 들쭉날쭉 코드 컨벤션
    - 뱀과 낙타의 공존
- 정립되지 않은 타임존 기준
    - utc, utc + 9, now

## 문제 5. 제약 없는 배포 프로세스


## 문제 6. 작성한 코드의 대략적인 영향력 생각하기

- 일단 필요하면 클래스 생성
- 반복문 속 쿼리 실행
- 메모리 가용량을 위협하는 코드