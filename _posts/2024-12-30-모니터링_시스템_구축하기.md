---
date: 2024-12-30
layout: post
title: 모니터링 시스템 구축하기
categories: [Backend]
image: >-
    https://github.com/user-attachments/assets/d8d79728-89e6-4f8d-b361-7e45b2b17a85
---

## 모니터링과 화법

회사에서 관련 자료로 발표할 일이 좀 있을 것 같아서 준비하는 김에 블로그에도 써본다.

본론에 들어가기 전에 그냥 요즘 하는 생각들을 써놓자면 기술 도입을 주장할 때 어떤 식으로 말해야 할지 많이 고민이 되는 것 같다.
팀의 전체적인 상황이나 여러가지 고려할 것도 많긴 한데, 
그 중에 가장 '지양'하려는 방식이 기술의 우수성으로 주장하는 건 많이 피하려고 생각중이다. 어떻게 보면 가장 설득력이 떨어지는 방식이 아닐까.

누구는 좋은거 몰라서 안했겠나. 그 기술이 좋은건 알아도 당장 도입을 해야하는 당위성이나 전체적인 상황을 많이 고려해보면 좋지 않을까 싶다.
효과적인 설득 방식이 어떤 방식들일지 많이 고민중이다. 화법에 대한 생각일수도 있겠다. 
인풋 대비 아웃풋, 더 나아질 수 있는 상황에 대한 설명, 우려되는 점 등등 다양하게 구상 중이다...

## 왜 필요한가?

기술적인 이득은 다들 알고 있지 않을까 싶다. 
로그 보기 편하고, 메트릭이나 에러가 난 상황에 대해 조사하기 좋고, 어떤 지표가 튀는지 관찰하기도 쉽고 등등...

나는 좀 다른 관점으로 생각해봤는데, 이게 결국 신뢰의 문제가 아닐까 싶다.
에러를 빨리 캐치하고 대응하는 것이 상황에 대해 인지하고 있다는 뜻이고, 고객에게 개발팀이 믿음을 얻을 수 있는 다양한 방법 중 하나가 아닐까? 
계속 결제 에러나서 연락해봤는데 에러 난 줄도 모르고 있으면 '얘네는 뭐하는 애들인가' 싶을 것 같다.

## 모니터링 툴
### Sentry

모니터링, 로깅 대표 주자 중 한명이다. 
참고로 사진은 내 개인 프로젝트에서 사용중인 화면이다. 회사 리소스 아니다.

프론트, 브라우저 단에서의 로깅은 사실상 센트리 말고 대안이 있나 싶긴 하다.
이런 생각이 들게 할 정도로 사용률이 높고, 참조할 만한 레퍼런스 자료도 풍부한 편이다.

![스크린샷 2025-01-02 231710](https://github.com/user-attachments/assets/46906026-545b-46ab-bbc2-ac47b6cb6a4f)

나는 매주 토요일 이메일로 리포트가 이런식으로 오는데, 나름 보는 재미도 쏠쏠하다.

![스크린샷 2025-01-02 231702](https://github.com/user-attachments/assets/2babb4c6-2e48-49c1-b328-b78148b2e412)
![스크린샷 2025-01-02 231650](https://github.com/user-attachments/assets/3741e6ca-1e94-47e6-a86a-28e2ff607b5d)

프론트 강자라고 백단에서 못 쓰는 것도 아니다.
나는 프론트단에서만 사용 중이긴 한데, 다양한 지표들과 로그들을 아주 손쉽게 남기고 확인할 수 있다.

언어별로 다양한 sdk를 지원해줘서 개발하기도 편하다.
슬랙같은 메신저로 에러 리포팅을 보내기도 깔쌈하고 사용하기 편한 포맷을 가지고 있다.

하지만 Saas라서 데이터가 저쪽으로 다 넘어가는게 문제다.
B2B라면 분명 고려해야 할 요소일 듯 하다.

이런 현상을 막기 위해 자체 호스팅 옵션으로도 센트리가 구매 가능한데, 생각보다 가격이 많이 차이난다.
관리가 귀찮아 지는 건 덤이다.
Saas 형태로 대여하면 월마다 ***$20 (team) / $80 (business)*** 와 같은 가격 구성을 가지고 있는데,
Self-hosted 옵션으로 가면  ***$ 276 (ec2/8cpu/16mem)*** 이다. 제법 차이난다.
Self-hosted 가격은 찾아도 잘 안나오길래 블로그 글에서 참고했다. 
아마 회사마다, 구성하는 인프라마다 가격은 다 다르지 않을까 싶다.

